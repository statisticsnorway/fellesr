[{"path":"/articles/vignette_dynarev_uttrekk.html","id":"parametre","dir":"Articles","previous_headings":"","what":"Parametre","title":"Uttrekk fra Dynarev til R","text":"delregnr : Numerisk vektor med delregisternummer. skjema : Karaktervektor med skjemanavn. enhets_type : Karaktervektor med enhetstype (f.eks. BEDR og/eller FRTK). skjema_cols : Boolsk/karaktervektor. Hvis TRUE henter man alle variabler fra skjema. Hvis FALSE henter man ikke skjemadata, kun SFU-data (hvis sfu_cols = TRUE). Det er også mulig å lage en vektor/liste av variabelnavn, f.eks. c(“variabel1”, “variabel2”), dersom man kun vil ha utvalgte variabler fra skjema. sfu_cols : Boolsk/karaktervektor. Hvis TRUE blir alle variabler fra SFU valgt delregister og skjema inkludert. å kun velge én eller flere variabler fra SFU skrives disse en vektor/liste, f.eks. c(“variabel1”, “variabel2”). skjema_sfu_merge : Boolsk. Hvis TRUE blir skjemadataene og SFU-dataene merget. Dersom FALSE blir dataene hentet som separate datasett en liste; [1] skjemadata og [2] SFU-data. dublettsjekk : Boolsk/karaktervektor. Hvis TRUE sjekkes det dubletter skjemadata etter ENHETS_ID. Dersom man ønsker å sjekke dubletter etter én eller flere selvvalgte variabler skrives disse en vektor, f.eks. c(“variabel1”, “variabel2”). Liste med datasett returneres; [1] skjemadata og [2] dublettdata (dersom det finnes dubletter, hvis ikke er denne blank). con_ask : Boolsk/karaktervektor. Hvis TRUE får man opp en boks som spør etter Oracle-passord. Hvis FALSE spørres det ikke om passord. Ved å skrive dynarev_uttrekk(con_ask = \"con\") får man opp en boks som spør etter Oracle-passord og kun koblingen mot Oracle blir returnert (ikke data). Denne kan brukes dersom man skal lese inn flere skjema etter hverandre å unngå å skrive inn passordet flere ganger. raadata : Boolsk. Hvis FALSE returneres reviderte data (fra FELT_VERDI), TRUE returnerer rådata.","code":"dynarev_uttrekk(   delregnr,   skjema,   enhets_type = c(\"FRTK\", \"BEDR\"),   skjema_cols = T,   sfu_cols = F,   skjema_sfu_merge = F,   dublettsjekk = F,   con_ask = T,   raadata = F )"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"eksempler","dir":"Articles","previous_headings":"","what":"Eksempler","title":"Uttrekk fra Dynarev til R","text":"følger en rekke eksempler på hvordan man bruker funksjonen dynarev_uttrekk.","code":""},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"alle-kolonner-fra-valgt-skjema","dir":"Articles","previous_headings":"Eksempler","what":"Alle kolonner fra valgt skjema","title":"Uttrekk fra Dynarev til R","text":"får man lastet inn alle kolonnene fra valgt skjema.","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = \"HELSE41\",                            skjema_cols = T)"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"utvalgte-kolonner-fra-valgt-skjema","dir":"Articles","previous_headings":"Eksempler","what":"Utvalgte kolonner fra valgt skjema","title":"Uttrekk fra Dynarev til R","text":"får man lastet ned utvalgte kolonner fra valgt skjema. er kolonnene AARGANG, FORETAKETS_NAVN og FORETAKETS_ORGNR valgt.","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = \"HELSE41\",                            skjema_cols = c(\"AARGANG\", \"FORETAKETS_NAVN\", \"FORETAKETS_ORGNR\"))"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"alle-sfu-kolonner-fra-valgt-skjema","dir":"Articles","previous_headings":"Eksempler","what":"Alle SFU-kolonner fra valgt skjema","title":"Uttrekk fra Dynarev til R","text":"får man lastet ned alle kolonnene med SFU-data fra valgt skjema.","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = \"HELSE41\",                            skjema_cols = F,                            sfu_cols = T)"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"utvalgte-sfu-kolonner-fra-valgt-skjema","dir":"Articles","previous_headings":"Eksempler","what":"Utvalgte SFU-kolonner fra valgt skjema","title":"Uttrekk fra Dynarev til R","text":"får man lastet ned utvalgte kolonner med SFU-data fra valgt skjema. er kolonnene NAVN og ORGNR valgt.","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = \"HELSE41\",                            skjema_cols = F,                            sfu_cols = c(\"NAVN\", \"ORGNR\"))"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"alle-sfu-kolonner-fra-alle-skjemaer","dir":"Articles","previous_headings":"Eksempler","what":"Alle SFU-kolonner fra alle skjemaer","title":"Uttrekk fra Dynarev til R","text":"får man lastet ned alle kolonnene med SFU-data fra alle skjema valgt delregister. Dersom man kun ønsker utvalgte variabler fra SFU-data erstattes sfu_cols = T med sfu_cols = c(\"variabel1\", \"variabel2\").","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = T,                            skjema_cols = F,                            sfu_cols = T)"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"alle-kolonner-fra-valgt-skjema-og-alle-sfu-kolonner","dir":"Articles","previous_headings":"Eksempler","what":"Alle kolonner fra valgt skjema og alle SFU-kolonner","title":"Uttrekk fra Dynarev til R","text":"får man lastet ned både skjemadata (alle kolonner) og SFU-data (alle kolonner) fra valgt delregister. Objektet dynarev inneholder altså datasett. å få hentet ut skjemadata skriver man dynarev_skjema <- data.frame(dynarev[1]) og å hente ut SFU-data skriver man dynarev_sfu <- data.frame(dynarev[2]).","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = \"HELSE41\",                            skjema_cols = T,                            sfu_cols = T)  dynarev_skjema <- data.frame(dynarev[1]) dynarev_sfu <- data.frame(dynarev[2])"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"alle-kolonner-fra-valgt-skjema-og-utvalgte-sfu-kolonner","dir":"Articles","previous_headings":"Eksempler","what":"Alle kolonner fra valgt skjema og utvalgte SFU-kolonner","title":"Uttrekk fra Dynarev til R","text":"får man lastet ned både skjemadata (alle kolonner) og SFU-data (utvalgte kolonner, NAVN og ORGNR) fra valgt delregister. Objektet dynarev inneholder altså datasett. å få hentet ut skjemadata skriver man dynarev_skjema <- data.frame(dynarev[1]) og å hente ut SFU-data skriver man dynarev_sfu <- data.frame(dynarev[2]).","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = \"HELSE41\",                            skjema_cols = T,                            sfu_cols = c(\"NAVN\", \"ORGNR\"))  dynarev_skjema <- data.frame(dynarev[1]) dynarev_sfu <- data.frame(dynarev[2])"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"utvalgte-kolonner-fra-valgt-skjema-og-utvalgte-sfu-kolonner","dir":"Articles","previous_headings":"Eksempler","what":"Utvalgte kolonner fra valgt skjema og utvalgte SFU-kolonner","title":"Uttrekk fra Dynarev til R","text":"får man lastet ned både skjemadata (utvalgte kolonner, AARGANG, FORETAKETS_NAVN og FORETAKETS_ORGNR) og SFU-data (utvalgte kolonner, NAVN og ORGNR) fra valgt delregister. Objektet dynarev inneholder altså datasett. å få hentet ut skjemadata skriver man dynarev_skjema <- data.frame(dynarev[1]) og å hente ut SFU-data skriver man dynarev_sfu <- data.frame(dynarev[2]).","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = \"HELSE41\",                            skjema_cols = c(\"AARGANG\", \"FORETAKETS_NAVN\", \"FORETAKETS_ORGNR\"),                            sfu_cols = c(\"NAVN\", \"ORGNR\"))  dynarev_skjema <- data.frame(dynarev[1]) dynarev_sfu <- data.frame(dynarev[2])"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"alle-kolonner-fra-valgt-skjema-og-alle-sfu-kolonner-koblet-sammen","dir":"Articles","previous_headings":"Eksempler","what":"Alle kolonner fra valgt skjema og alle SFU-kolonner (koblet sammen)","title":"Uttrekk fra Dynarev til R","text":"får man lastet ned både skjemadata (alle kolonner) og SFU-data (alle kolonner) fra valgt delregister. SFU-dataene blir koblet på skjemadataene slik man kun får én fil.","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = \"HELSE41\",                            skjema_cols = T,                            sfu_cols = T,                            skjema_sfu_merge = T)"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"alle-kolonner-fra-valgt-skjema-og-utvalgte-sfu-kolonner-koblet-sammen","dir":"Articles","previous_headings":"Eksempler","what":"Alle kolonner fra valgt skjema og utvalgte SFU-kolonner (koblet sammen)","title":"Uttrekk fra Dynarev til R","text":"får man lastet ned både skjemadata (alle kolonner) og SFU-data (utvalgte kolonner, NAVN og ORGNR) fra valgt delregister. SFU-dataene blir koblet på skjemadataene slik man kun får én fil.","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = \"HELSE41\",                            skjema_cols = T,                            sfu_cols = c(\"NAVN\", \"ORGNR\"),                            skjema_sfu_merge = T)"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"utvalgte-kolonner-fra-valgt-skjema-og-utvalgte-sfu-kolonner-koblet-sammen","dir":"Articles","previous_headings":"Eksempler","what":"Utvalgte kolonner fra valgt skjema og utvalgte SFU-kolonner (koblet sammen)","title":"Uttrekk fra Dynarev til R","text":"får man lastet ned både skjemadata (utvalgte kolonner, AARGANG, FORETAKETS_NAVN og FORETAKETS_ORGNR) og SFU-data (utvalgte kolonner, NAVN og ORGNR) fra valgt delregister. SFU-dataene blir koblet på skjemadataene slik man kun får én fil.","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                                     skjema = \"HELSE41\",                                     skjema_cols = c(\"AARGANG\", \"FORETAKETS_NAVN\", \"FORETAKETS_ORGNR\"),                                     sfu_cols = c(\"NAVN\", \"ORGNR\"),                                     skjema_sfu_merge = T)"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"dublettsjekk-etter-enhets_id","dir":"Articles","previous_headings":"Eksempler","what":"Dublettsjekk etter ENHETS_ID","title":"Uttrekk fra Dynarev til R","text":"får man testet dubletter (etter ENHETS_ID) skjemadata. Liste med datasett returneres; [1] skjemadata og [2] dublettdata (dersom det finnes dubletter, hvis ikke er denne blank).","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = \"HELSE39\",                            dublettsjekk = T)  dynarev_skjema <- data.frame(dynarev[1]) dynarev_dubletter <- data.frame(dynarev[2])"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"dublettsjekk-etter-egenvalgte-variabler","dir":"Articles","previous_headings":"Eksempler","what":"Dublettsjekk etter egenvalgte variabler","title":"Uttrekk fra Dynarev til R","text":"Dersom man ønsker å sjekke dubletter etter én eller flere selvvalgte variabler skrives disse en vektor, f.eks. dublettsjekk = c(\"variabel1\", \"variabel2\").","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = \"HELSE0X\",                            dublettsjekk = c(\"FORETAKSNR\", \"ART_SEKTOR\", \"FUNKSJON_KAPITTEL\"))  dynarev_skjema <- data.frame(dynarev[1]) dynarev_dubletter <- data.frame(dynarev[2])"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"laste-inn-flere-skjema-uten-å-skive-passord","dir":"Articles","previous_headings":"Eksempler","what":"Laste inn flere skjema uten å skive passord","title":"Uttrekk fra Dynarev til R","text":"å slippe å oppgi passord flere ganger når man skal laste inn flere skjema kan man skrive con_ask = FALSE. dette skal fungere må man logge på først øverst scriptet: con <- dynarev_uttrekk(con_ask = \"con\")","code":"con <- dynarev_uttrekk(con_ask = \"con\")  dynarev_1 <- dynarev_uttrekk(delregnr = 2421,                              skjema = \"HELSE41\",                              skjema_cols = T,                              con_ask = F)  dynarev_2 <- dynarev_uttrekk(delregnr = 2421,                              skjema = \"HELSE46P\",                              skjema_cols = T,                              con_ask = F)  dynarev_3 <- dynarev_uttrekk(delregnr = 2421,                              skjema = \"HELSE39\",                              skjema_cols = T,                              con_ask = F)"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"laste-inn-flere-skjema-fra-samme-delreg-i-samme-fil","dir":"Articles","previous_headings":"Eksempler","what":"Laste inn flere skjema fra samme delreg i samme fil","title":"Uttrekk fra Dynarev til R","text":"å laste inn data fra flere skjemaer samme fil skriver man skjemanavnene en karaktervektor argumentet skjema. er skjemaene HELSE38P, HELSE39 og HELSE44P valgt.","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = c(\"HELSE38P\", \"HELSE39\", \"HELSE44P\"),                            skjema_cols = c(\"FORETAKETS_NAVN\", \"FORETAKETS_ORGNR\", \"HELSEREGION_EPOST\", \"HELSEREGION_NAVN\"))"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"laste-inn-alle-skjema-fra-delreg-i-samme-fil","dir":"Articles","previous_headings":"Eksempler","what":"Laste inn alle skjema fra delreg i samme fil","title":"Uttrekk fra Dynarev til R","text":"å laste inn alle skjema fra samme delregister samme fil skriver man skjema = T. enhets_type må man samtidig skrive inn alle enhetstypene som finnes det valgte delregisteret (f.eks. BEDR og FRTK). OBS: dette uttrekket kan føre til en veldig stor fil med mange rader og kolonner så det kan være lurt å spesifisere hvilke variabler man ønsker å hente ut.","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                                      skjema = T,                                      skjema_cols = T,                                      sfu_cols = F)"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"laste-inn-sfu-data-fra-flere-skjema-fra-delreg-i-samme-fil","dir":"Articles","previous_headings":"Eksempler","what":"Laste inn sfu-data fra flere skjema fra delreg i samme fil","title":"Uttrekk fra Dynarev til R","text":"lastes det inn SFU-data fra flere skjema (fra samme delregister).","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = c(\"HELSE38P\", \"HELSE39\", \"HELSE44P\"),                            skjema_cols = F,                            sfu_cols = T)"},{"path":"/articles/vignette_dynarev_uttrekk.html","id":"laste-inn-rådata","dir":"Articles","previous_headings":"Eksempler","what":"Laste inn rådata","title":"Uttrekk fra Dynarev til R","text":"lastes det inn rådata fra de aktive enhetene valgt skjema/valgte skjemaer.","code":"dynarev <- dynarev_uttrekk(delregnr = 2421,                            skjema = T,                            skjema_cols = T,                            raadata = T)"},{"path":"/articles/vignette_renv.html","id":"hva-er-renv","dir":"Articles","previous_headings":"","what":"Hva er renv?","title":"R pakkehåndtering med renv og fellesr","text":"Det er utrolig mange tilleggspakker tilgjengelig R. tid vil funksjonalitet disse pakkene utvikle og endre seg. en produksjonsløp har vi behov stabilitet og koden kan kjøres på nytt neste kvartal og neste år. renv er en pakkehåndteringsverktøy som kan brukes til å forsikre kode kan kjøres tid. Det lagres en “lock” fil hvor versjonsnummer av installerte og brukt pakker lagres. Denne filen kan da skape det samme miljø med de samme versjonene av pakkene fremtida og av forskjellige personer. Disse filer kan pushes opp til github slik andre kan bruke de.","code":""},{"path":"/articles/vignette_renv.html","id":"hvordan-installere-jeg-renv","dir":"Articles","previous_headings":"","what":"Hvordan installere jeg renv?","title":"R pakkehåndtering med renv og fellesr","text":"Vi har laget noen tilleggs-funksjoner som gjøre det lettere å ta bruk renv på SSB. Disse ligger felles pakken fellesr. Hvis renv/fellesr ikke er installert fra før kan du installere dem med Passordet er Personal Access Token du har lagret Github (den lange med masse tall og tegn).","code":"library(getPass) devtools::install_github(\"statisticsnorway/fellesr\",                           auth_token = getPass(\"PAT: \"))"},{"path":"/articles/vignette_renv.html","id":"hvordan-bruker-jeg-renv","dir":"Articles","previous_headings":"","what":"Hvordan bruker jeg renv?","title":"R pakkehåndtering med renv og fellesr","text":"å bruke renv må du først kalle biblioteket: Det er tre oppgaver som er viktig å lære deg å kunne ta bruk renv: Opprette og lagre et ny renv miljø til et prosjekt Bruk et eksisterende renv miljø Endre et eksisterende renv miljø Disse blir forklarte mer detaljer ","code":"library(fellesr)"},{"path":"/articles/vignette_renv.html","id":"opprett","dir":"Articles","previous_headings":"Hvordan bruker jeg renv?","what":"Opprette et nytt renv miljø","title":"R pakkehåndtering med renv og fellesr","text":"Første gang renv skal brukes et prosjekt/produksjonsløp må det opprettes noen filer. Dette kan gjøres ved Du vil se en renv mappe nå ligge klar mappe-struktur. Hvis du jobber Dapla/Jupyter trenger du også en fil som spesifisere hvilken pakke skal brukes som deretter skrives til lock filen. Du kan opprette denne filen ved Og da er du klar å jobbe og kjøre koden din!!  Installere og bruker de pakkene du ønsker koden din. Pakken fellesr inkludere en funksjon install.packages() som vil peke til riktig sted å installere fra og kan dermed brukes lukket soner på SSB. eksempel:  Hvis du sliter med å installere en pakke du ønsker og den ligger felles installerte pakker can du prøve funksjonen ssb_library(). example å installere dply pakken: Når du er fornøyd med koden din og de pakkene og funksjoner som er brukt produksjonsløpet, lage en “snapshot” av det. Dette vil skrive hvilke pakker er brukt til dependencies-filen og lagre versjonsnummer lock-filen.","code":"init() create_dependencies() install.packages(A3) library(A3) a3(rating ~ ., attitude, lm, p.acc = 0.1) ssb_library(dplyr) snapshot()"},{"path":"/articles/vignette_renv.html","id":"bruk","dir":"Articles","previous_headings":"Hvordan bruker jeg renv?","what":"Bruk et eksisterende renv miljø","title":"R pakkehåndtering med renv og fellesr","text":"å bruke et eksistende renv miljø må du først si du ønsker å ta bruk renv (hvis du ikke har gjort det før) ved å endre og oppdatere pakkene så de er det samme som lock-filen, kjøre du Du kan se hvilken pakken som er lock-filen ved","code":"library(fellesr) init() restore() dependencies()"},{"path":"/articles/vignette_renv.html","id":"endre","dir":"Articles","previous_headings":"Hvordan bruker jeg renv?","what":"Endre et renv miljø","title":"R pakkehåndtering med renv og fellesr","text":"Etter tid vil du sannsynligivs får behov å endre koden din, legge til nye funksjonaliteter eller nye figurer osv. Hvis din nye kode er avhengige av andre pakker trenger du å oppdatere lock-filen. Igjen, forsøke du har tatt bruk renv ved å oppdatere lock-filen ta en snapshot Hvis det er pakker du ikke ønsker å bruke lengere kan du fjerne dem og rydde opp  å sjekke hvilken pakke er lagret lock-filen kan du kjøre","code":"library(fellesr) init() snapshot() remove(A3) clean(actions = \"unused.packages\") dependencies()"},{"path":"/articles/web_only/bygge-en-r-tilleggspakke.html","id":"hvorfor-bygge-en-r-pakke","dir":"Articles > Web_only","previous_headings":"","what":"Hvorfor bygge en R-pakke?","title":"Hvordan å bygge en R-pakke","text":"Har du en laget en funksjon som du tror andre kan få nytte av? Den beste løsning å dele funksjoner R med andre er å lage en pakke. Koden blir dokumentert på en standardisert måte og det kan lett deles med andre internt og eksternt. Det er gode løsninger avhengighet mellom pakker og funksjoner ulike pakker. Hovedårsakene å bygge R-pakker: Lett å dele og flytte Organisere arbeid Dokumentasjon både deg selv og andre R Packages skrevet av Hadley Wickham er en veldig god referanse pakke-bygging. Denne bloggen gir en kort intro og referere til forkjellige uvsnitt boken videre lesing.","code":""},{"path":"/articles/web_only/bygge-en-r-tilleggspakke.html","id":"tekniske-oppsetting","dir":"Articles > Web_only","previous_headings":"","what":"Tekniske oppsetting","title":"Hvordan å bygge en R-pakke","text":"Det er anbefalt å bygge R-pakke RStudio. Det er lettest å gjøre dette admin/på PC eller på linux. På linux er alle nødvendig tilleggsverktøy og pakker installerte. Det er tida tekniske problemer med å lage pakker windows prod. sone. å bygge en pakke admin/på PC: Installere R og RStudio hvis ikke du har gjort dette tidligere. Søk om admin tilgang til PCen din om nødvendig. Installere git. Dette er verktøy vi bruker å dele pakken etterpå. Det er anbefalte å installere Rtools, særlig hvis koden inkluderer C, C++ eller Fortran kode. Hvis du vil bygge pdf-hjelp filene selv trenger du å installere en LaTeX verktøy eks. MikTex Det er fem nyttige R-pakker som gjøre pakke bygging prosessen lettere. Disse kan installeres ved: Endelig kan du sjekke om systemet er klar å bygge en pakke ved å kjøre:","code":"install.packages(c(\"devtools\", \"roxygen2\", \"testthat\", \"usethis\", \"knitr\")) library(devtools) has_devel()"},{"path":"/articles/web_only/bygge-en-r-tilleggspakke.html","id":"bygge-pakke-struktur","dir":"Articles > Web_only","previous_headings":"","what":"Bygge pakke-struktur","title":"Hvordan å bygge en R-pakke","text":"R-pakker har en standard struktur som må følges. å bygge alle nødvendig filer kan du kjøre: Dette oppretter noen mapper og filer og vil ligne på dette  Hovedkomponenter er: R/ mappe hvor R-kode skal ligge. man/ mappe hvor beskrivelsen av funksjoner skal lagres. En DESCRIPTION fil, som gi en generell beskrivelsen av pakken. En NAMESPACE fil, som forklarer hvordan pakken og funksjoner skal kommunisere med andre pakker. Når man lage en pakke, opprettes det en Rstudio prosjekt fil, pkgname.Rproj og en .buildignore fil.","code":"library(usethis) create_package(\"~/path/to/minpakke\")"},{"path":"/articles/web_only/bygge-en-r-tilleggspakke.html","id":"description-fil","dir":"Articles > Web_only","previous_headings":"","what":"DESCRIPTION-fil","title":"Hvordan å bygge en R-pakke","text":"DESCRIPTION filen sier noen generelt om pakken du lager. Det inkluderer navn av pakken, beskrivelsen og hvem som har skrevet det. Denne filen kan åpnes og redigeres direkte RStudio. eksempel:  Mer detaljer om DESCRIPTION filen finner du ","code":""},{"path":"/articles/web_only/bygge-en-r-tilleggspakke.html","id":"dokumentasjon-av-kodefunksjoner","dir":"Articles > Web_only","previous_headings":"","what":"Dokumentasjon av kode/funksjoner","title":"Hvordan å bygge en R-pakke","text":"Funksjoner skal ligger som .R filer og skal flytte inn mappen som heter R/. Det er anbefalt å dokumentere funksjoner ved roxygen2. Da kan du gi funksjoner et navn og beskrivelsen tillegg til å spesifisere parameter og det som returneres. Det er alltid god praksis å lage noen enkel eksempler som viser hvordan funksjoner fungere. Mer om dokumentasjon av koden ved roxygen2 finner du Object documentation.","code":""},{"path":"/articles/web_only/bygge-en-r-tilleggspakke.html","id":"andre-filer","dir":"Articles > Web_only","previous_headings":"","what":"Andre filer","title":"Hvordan å bygge en R-pakke","text":"Det er mye annet som kan inkludere en pakke. eksempel kan det være nyttig til å inkludere noen små datasett til eksempler og testing. Disse skal være syntetiske data eller offentlig datasett. Mer om å inkludere data pakken din finner du .","code":""},{"path":"/articles/web_only/bygge-en-r-tilleggspakke.html","id":"testing","dir":"Articles > Web_only","previous_headings":"","what":"Testing","title":"Hvordan å bygge en R-pakke","text":"Det er ikke strengt nødvendig å lage noen formelle tester (enhetstester) til funksjoner en pakke men det er anbefalt. Det kan ofte bidra til færre bugs og bedre struktur koden. Pakken testthat gi et rammeverk å lage og kjøre tester. En typisk test er å sjekke en funksjon returnere en forventet verdi. eksempel kan vi bruke vectoren x nede å teste funksjonen mean returnerer den riktige verdien: bruker vi expect_equal og gir verdier som vi forventer er like. Mer hjelp og eksempler tester ligger . Koden tester skal ligger .R filer og skal ligge pakken /tests/testthat/.Fil-navn skal starte med test. tillegg til fil(ene) som inneholder tester skal det være en fil som heter testthat.R. Dette lagres mappen /tests/ og gir instruks om det som skal testes. eksempel vil det vanligvis ligne på dette: Mer informajson om testing finner du kapittel 12.","code":"x <- c(3, 4, 5) test_that(\"The function mean returns a correct value\",{   expect_equal(mean(x), 4) }) ## Test passed library(testthat) library(minpakke)  test_check(\"minpakke\")"},{"path":"/articles/web_only/bygge-en-r-tilleggspakke.html","id":"dele-med-andre-ved-git","dir":"Articles > Web_only","previous_headings":"","what":"Dele med andre ved git","title":"Hvordan å bygge en R-pakke","text":"Git er et verktøy å versjonskontrollere kode og å dele med andre. Ved å legge pakken din på git betyr det andre kan installere pakken selv. Generelle informasjon om git SSB finner du på Byrånettet. Mye informasjon om git og R finner Happy Git Gihub useR. Noen filer vil du inkludere på github/bitbucket men ikke pakken din når det bygges. Dette kan være, eksempel, noen kjørekode som brukes utvikling/testing. En .Rbuildignore-fil kan inkluderes git repo å spesifisere hvilke filer ikke skal bygges inn pakken.","code":""},{"path":"/articles/web_only/bygge-en-r-tilleggspakke.html","id":"automatisere-testing-med-github-actions","dir":"Articles > Web_only","previous_headings":"","what":"Automatisere testing med github actions","title":"Hvordan å bygge en R-pakke","text":"Github Actions er en måte å automatisering testing av pakken din. Det kjøres tester om pakken kan bygges og om alle enhetstester godkjennes hver gang none endringer blir pushe opp til github (eksempel). Det kan også teste funksjonene fine på forskjellige OS og på forskjellige versjoner av R. Et eksempel av en pakke med tester og github actions er klassR som ligger ut på github. kan du se litt på workflows mappen og filene som kreves å kjøre disse automatiserte tester. Mer informasjon om hvordan å sette opp github action R finner på Github Actions R og/ eller på r-lib.","code":""},{"path":"/articles/web_only/bygge-en-r-tilleggspakke.html","id":"sitte-fast","dir":"Articles > Web_only","previous_headings":"","what":"Sitte fast?","title":"Hvordan å bygge en R-pakke","text":"Hvis du sitter fast med et problem med pakke bygging er det veldig sannsynlig andre på SSB har hatt det samme problemet. Ta gjerne kontakt med andre på Yammer","code":""},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Susie Jentoft. Author, maintainer. Sindre Haugen. Author.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Jentoft S, Haugen S (2022). fellesr: General R functions SSB. R package version 0.1.1, https://statisticsnorway.github.io/fellesr/.","code":"@Manual{,   title = {fellesr: General R functions for SSB},   author = {Susie Jentoft and Sindre Haugen},   year = {2022},   note = {R package version 0.1.1},   url = {https://statisticsnorway.github.io/fellesr/}, }"},{"path":"/index.html","id":"general-functions-for-ssb","dir":"","previous_headings":"","what":"General functions for SSB","title":"General R functions for SSB","text":"can find array functions specifically tasks unique SSB R users. Search “Articles” topics. https://statisticsnorway.github.io/fellesr/","code":""},{"path":"/reference/create_dependencies.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a dependencies file — create_dependencies","title":"Create a dependencies file — create_dependencies","text":"Create dependencies file","code":""},{"path":"/reference/create_dependencies.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a dependencies file — create_dependencies","text":"","code":"create_dependencies(lines = NULL, force = FALSE, warning = TRUE)"},{"path":"/reference/create_dependencies.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a dependencies file — create_dependencies","text":"lines Additional lines include file force Whether file forcibly overwrite exists warning Whether warning given force overwrite","code":""},{"path":"/reference/create_dependencies.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a dependencies file — create_dependencies","text":"None. dependencies.R file created","code":""},{"path":"/reference/dynarev_uttrekk.html","id":null,"dir":"Reference","previous_headings":"","what":"Uttrekk fra Dynarev til R — dynarev_uttrekk","title":"Uttrekk fra Dynarev til R — dynarev_uttrekk","text":"dynarev_uttrekk er en funksjon som henter inn data fra Dynarev til R så lenge man oppgir delregisternummer (og ev. skjemanavn). Det er kun enheter som er satt som aktive (AKTIV = 1) som blir lastet ned. Det er mulig å hente skjemadata (variablene selve skjemaet) og SFU-data (enhetsinformasjon). Man kan også gjennomføre dublettsjekker og velge mellom reviderte data og rådata.","code":""},{"path":"/reference/dynarev_uttrekk.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Uttrekk fra Dynarev til R — dynarev_uttrekk","text":"","code":"dynarev_uttrekk(   delregnr,   skjema = T,   enhets_type = c(\"FRTK\", \"BEDR\"),   skjema_cols = T,   sfu_cols = F,   skjema_sfu_merge = F,   dublettsjekk = F,   con_ask = T,   raadata = F )"},{"path":"/reference/dynarev_uttrekk.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Uttrekk fra Dynarev til R — dynarev_uttrekk","text":"delregnr Numerisk vektor med delregisternummer. skjema Boolsk/karaktervektor med skjemanavn. Hvis TRUE returneres alle skjema valgt delregister. enhets_type Karaktervektor med enhetstype (f.eks. BEDR og/eller FRTK). skjema_cols Boolsk/karaktervektor. Hvis TRUE henter man alle variabler fra skjema. Hvis FALSE henter man ikke skjemadata, kun SFU-data (hvis skjema_cols = TRUE). Det er også mulig å lage en vektor/liste av variabelnavn, f.eks. skjema_cols = c(\"variabel1\", \"variabel2\"), dersom man kun vil ha utvalgte variabler fra skjema. sfu_cols Boolsk/karaktervektor. Hvis TRUE blir alle variabler fra SFU valgt delregister og skjema inkludert. å kun velge én eller flere variabler fra SFU skrives disse en vektor/liste, f.eks. sfu_cols = c(\"variabel1\", \"variabel2\"). skjema_sfu_merge Boolsk. Hvis TRUE blir skjemadataene og SFU-dataene merget. Dersom FALSE blir dataene hentet som separate datasett en liste; [1] skjemadata og [2] SFU-data. dublettsjekk Boolsk/karaktervektor. Hvis TRUE sjekkes det dubletter skjemadata etter ENHETS_ID. Dersom man ønsker å sjekke dubletter etter én eller flere selvvalgte variabler skrives disse en vektor, f.eks. dublettsjekk = c(\"variabel1\", \"variabel2\"). Liste med datasett returneres; [1] skjemadata og [2] dublettdata (dersom det finnes dubletter, hvis ikke er denne blank). con_ask Boolsk/karaktervektor. Hvis TRUE får man opp en boks som spør etter Oracle-passord. Hvis FALSE spørres det ikke om passord. Ved å skrive dynarev_uttrekk(con_ask = \"con\") får man opp en boks som spør etter Oracle-passord og kun koblingen mot Oracle blir returnert (ikke data). Denne kan brukes dersom man skal lese inn flere skjema etter hverandre å unngå å skrive inn passordet flere ganger. raadata Boolsk. Hvis FALSE returneres reviderte data (fra FELT_VERDI), TRUE returnerer rådata.","code":""},{"path":"/reference/dynarev_uttrekk.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Uttrekk fra Dynarev til R — dynarev_uttrekk","text":"Objekt (data.frame) med valgt data fra Dynarev, dersom enten skjema_cols eller sfu_cols = TRUE. Om både skjema_cols og sfu_cols = TRUE returneres en liste med datasett [1] skjema_cols og [2] sfu_cols. Om skjema_cols, sfu_cols og skjema_sfu_merge = TRUE returneres det ett objekt (data.frame). Dersom con_ask = \"con\" returneres kun kobling mot Oracle.","code":""},{"path":"/reference/dynarev_uttrekk.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Uttrekk fra Dynarev til R — dynarev_uttrekk","text":"","code":"if (FALSE) { dynarev <- dynarev_uttrekk(delregnr = 2421,                           skjema = \"HELSE41\",                           skjema_cols = T) }"},{"path":"/reference/fellesr-package.html","id":null,"dir":"Reference","previous_headings":"","what":"fellesr: General R functions for SSB — fellesr-package","title":"fellesr: General R functions for SSB — fellesr-package","text":"package gerenal R functions may useful general use SSB.","code":""},{"path":[]},{"path":"/reference/fellesr-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"fellesr: General R functions for SSB — fellesr-package","text":"Maintainer: Susie Jentoft susie.jentoft@ssb.Authors: Sindre Haugen sindre.haugen@ssb.","code":""},{"path":"/reference/find_problem.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal library function for a difficult package — find_problem","title":"Internal library function for a difficult package — find_problem","text":"Internal library function difficult package","code":""},{"path":"/reference/find_problem.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal library function for a difficult package — find_problem","text":"","code":"find_problem(pkg, lib)"},{"path":"/reference/find_problem.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Internal library function for a difficult package — find_problem","text":"pkg Character vector name package lib Character vector path librarys","code":""},{"path":"/reference/find_problem.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Internal library function for a difficult package — find_problem","text":"Invisible NULL","code":""},{"path":"/reference/hello.html","id":null,"dir":"Reference","previous_headings":"","what":"Hello, World! — hello","title":"Hello, World! — hello","text":"Prints 'Hello, world!'.","code":""},{"path":"/reference/hello.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Hello, World! — hello","text":"","code":"hello()"},{"path":"/reference/hello.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Hello, World! — hello","text":"","code":"hello() #> Error in hello(): could not find function \"hello\""},{"path":"/reference/install.packages.html","id":null,"dir":"Reference","previous_headings":"","what":"Install packages in SSB from CRAN\r\nWrapper function for utils::install.packages — install.packages","title":"Install packages in SSB from CRAN\r\nWrapper function for utils::install.packages — install.packages","text":"Install packages SSB CRAN Wrapper function utils::install.packages","code":""},{"path":"/reference/install.packages.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Install packages in SSB from CRAN\r\nWrapper function for utils::install.packages — install.packages","text":"","code":"install.packages(pkgs, lib, repos, ...)"},{"path":"/reference/install.packages.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Install packages in SSB from CRAN\r\nWrapper function for utils::install.packages — install.packages","text":"pkgs Name packages install lib Character vector giving library directory repos Character vector giving CRAN repository use ... Addition parameters (see https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/install.packages)","code":""},{"path":"/reference/install.packages.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Install packages in SSB from CRAN\r\nWrapper function for utils::install.packages — install.packages","text":"Invisible NULL","code":""},{"path":"/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"/reference/restore.html","id":null,"dir":"Reference","previous_headings":"","what":"Restore a SSB project\r\nWrapper function for renv::restore() — restore","title":"Restore a SSB project\r\nWrapper function for renv::restore() — restore","text":"Restore SSB project Wrapper function renv::restore()","code":""},{"path":"/reference/restore.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Restore a SSB project\r\nWrapper function for renv::restore() — restore","text":"","code":"restore(repo, ...)"},{"path":"/reference/restore.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Restore a SSB project\r\nWrapper function for renv::restore() — restore","text":"repo Character vector pointing repository used ...","code":""},{"path":"/reference/restore.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Restore a SSB project\r\nWrapper function for renv::restore() — restore","text":"Invisible NULL","code":""},{"path":"/reference/snapshot.html","id":null,"dir":"Reference","previous_headings":"","what":"Snapshot a SSB project\r\nWrapper function for renv::snapshot — snapshot","title":"Snapshot a SSB project\r\nWrapper function for renv::snapshot — snapshot","text":"Snapshot SSB project Wrapper function renv::snapshot","code":""},{"path":"/reference/snapshot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Snapshot a SSB project\r\nWrapper function for renv::snapshot — snapshot","text":"","code":"snapshot(ignore, ...)"},{"path":"/reference/snapshot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Snapshot a SSB project\r\nWrapper function for renv::snapshot — snapshot","text":"ignore List packages ignore","code":""},{"path":"/reference/snapshot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Snapshot a SSB project\r\nWrapper function for renv::snapshot — snapshot","text":"None. lock dependencies.R files updated. details see https://rstudio.github.io/renv/reference/snapshot.html","code":""},{"path":"/reference/ssb_library.html","id":null,"dir":"Reference","previous_headings":"","what":"Library function for a difficult package\r\nSome packages are not able to be installed by the user for various reasons. In this case the package may be able to be called from the common SSB library using this function. — ssb_library","title":"Library function for a difficult package\r\nSome packages are not able to be installed by the user for various reasons. In this case the package may be able to be called from the common SSB library using this function. — ssb_library","text":"Library function difficult package packages able installed user various reasons. case package may able called common SSB library using function.","code":""},{"path":"/reference/ssb_library.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Library function for a difficult package\r\nSome packages are not able to be installed by the user for various reasons. In this case the package may be able to be called from the common SSB library using this function. — ssb_library","text":"","code":"ssb_library(package, ...)"},{"path":"/reference/ssb_library.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Library function for a difficult package\r\nSome packages are not able to be installed by the user for various reasons. In this case the package may be able to be called from the common SSB library using this function. — ssb_library","text":"package Character vector name package ...","code":""},{"path":"/reference/ssb_library.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Library function for a difficult package\r\nSome packages are not able to be installed by the user for various reasons. In this case the package may be able to be called from the common SSB library using this function. — ssb_library","text":"Invisible NULL","code":""},{"path":"/reference/try_common_library.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal library function for a difficult package — try_common_library","title":"Internal library function for a difficult package — try_common_library","text":"Internal library function difficult package","code":""},{"path":"/reference/try_common_library.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal library function for a difficult package — try_common_library","text":"","code":"try_common_library(pkg)"},{"path":"/reference/try_common_library.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Internal library function for a difficult package — try_common_library","text":"pkg Character vector name package","code":""},{"path":"/reference/try_common_library.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Internal library function for a difficult package — try_common_library","text":"Invisible NULL","code":""}]
